(this.webpackJsonphotm=this.webpackJsonphotm||[]).push([[8,10],{298:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(14),r=a.n(n),i=a(24),o=a(6),l=a(0),c=a.n(l),s=a(29),u=a(87),m=a(333),d=Object(s.a)((function(){return{stripe:{marginTop:20,marginBottom:20}}})),g=function(){return{hidePostalCode:!0,style:{base:{letterSpacing:"0.025em","::placeholder":{color:"#aab7c4"}},invalid:{color:"#c23d4b"}}}};var p=Object(m.injectStripe)((function(e){var t=e.loggedIn,a=e.stripe,n=e.handleCharge,s=e.payMessage,p=Object(l.useState)(""),b=Object(o.a)(p,2),f=b[0],v=b[1],y=d(),E=function(){var e=Object(i.a)(r.a.mark((function e(t){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a){e.next=8;break}return e.next=4,a.createToken();case 4:(i=e.sent).token?n(i.token):alert("Payment token creation failed"),e.next=9;break;case 8:console.log("Stripe.js hasn't loaded yet.");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:y.stripe},c.a.createElement("form",{onSubmit:E},c.a.createElement("label",null,"Card details",c.a.createElement(m.CardElement,Object.assign({onChange:function(e){var t=e.error;t&&v(t.message)}},g()))),c.a.createElement("div",{className:y.stripe,role:"alert"},f),c.a.createElement(u.a,{variant:"contained",color:"primary",fullWidth:!0,type:"submit",disabled:!t},s)))}));function b(e){var t=e.stripePublicKey,a=e.handleCharge,n=e.loggedIn,r=e.payMessage;return c.a.createElement(m.StripeProvider,{apiKey:t},c.a.createElement(m.Elements,null,c.a.createElement(p,{handleCharge:a,loggedIn:n,payMessage:r})))}},304:function(e,t,a){"use strict";var n=a(32),r=a(8),i=a(6),o=a(0),l=a.n(o),c=a(29),s=a(87),u=a(440),m=a(663),d=a(664),g=a(262),p=a(119),b=a(21),f=a(264),v=a(670),y=a(20),E=a(656),k=a(657),h=a(661),O=a(659),j=a(658),x=a(157),w=a(159),S=a(325),B=a.n(S),C=a(324),P=a.n(C),N=a(326),D=a.n(N),_=a(327),A=a.n(_),M=a(106),z=a.n(M),I=a(328),F=a.n(I),T=a(329),L=a.n(T),Y=a(662),Q=a(660),R=Object(c.a)((function(e){return{paper:{width:"100%",overflowX:"auto"},background:{backgroundColor:e.palette.primary.main},priceField:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"inline"}),priceEmbedded:Object(y.a)({display:"inline"},e.breakpoints.up("sm"),{display:"none"})}}));var H=Object(n.b)((function(e){return{itemQty:e.itemQty}}),(function(e){return{incItemQty:function(t){return e(Object(r.E)(t))},decItemQty:function(t){return e(Object(r.C)(t))}}}))((function(e){var t=e.theme,a=e.items,n=e.cat,r=e.organic,c=e.pensioner,u=e.itemQty,m=e.incItemQty,d=e.decItemQty,g=e.artistBooking,p=R(t),b=Object(o.useState)(!1),f=Object(i.a)(b,2),v=f[0],y=f[1];return l.a.createElement(x.a,{className:p.paper},l.a.createElement(E.a,{size:"small","aria-label":"a dense table"},l.a.createElement(k.a,{className:p.background},l.a.createElement(j.a,null,l.a.createElement(O.a,{align:"left",style:{width:"60%"}},n.name.toUpperCase(),l.a.createElement(w.a,{onClick:function(e){y(!v)},edge:"start"},v?l.a.createElement(P.a,null):l.a.createElement(B.a,null))),l.a.createElement(O.a,{align:"right",style:{width:"30%",padding:0}},l.a.createElement("div",{className:p.priceField},l.a.createElement(D.a,{fontSize:"small",color:"inherit"}))),l.a.createElement(O.a,{align:"right",style:{width:"10%"}},l.a.createElement(w.a,{color:"inherit"},l.a.createElement(Q.a,{badgeContent:function(e,t){var a=0,n=!0,r=!1,i=void 0;try{for(var o,l=e.list[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;a+=t[c]?t[c]:0}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}(n,u),showZero:!0},l.a.createElement(A.a,null)))))),v?l.a.createElement(h.a,null,n.list.map((function(e){return l.a.createElement(j.a,{key:e},l.a.createElement(O.a,{align:"left",style:{width:"60%"}},a[e].description+(a[e].addOn?"*":""),l.a.createElement("div",{className:p.priceEmbedded}," - $"+((r?a[e].organicPrice:a[e].price)*(c?.8:1)).toFixed(2))),l.a.createElement(O.a,{align:"right",style:{width:"30%",padding:0}},l.a.createElement("div",{className:p.priceField},((r?a[e].organicPrice:a[e].price)*(c?.8:1)).toFixed(2))),a[e].onlineBooking||g?l.a.createElement(O.a,{align:"right",style:{width:"10%"}},l.a.createElement(Y.a,null,l.a.createElement(s.a,{variant:"text",startIcon:l.a.createElement(z.a,{fontSize:"small"}),onClick:function(){return m(e)}},u[e]?u[e]:0),l.a.createElement(w.a,{onClick:function(){return d(e)}},l.a.createElement(F.a,{fontSize:"small"})))):l.a.createElement(O.a,{align:"center",style:{width:"10%"}},l.a.createElement(L.a,null)))}))):null))})),q=a(260),$=a(259),U=a(273),V=a(216),W=a(331),K=a.n(W),G=a(330),X=a.n(G),J=Object(c.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:0,paddingBottom:20},textField:{width:"100%"}}})),Z={componentRestrictions:{country:"au"}};function ee(e){var t=e.address,a=e.changeAddr,n=J();return l.a.createElement(X.a,{value:t,onChange:a,onSelect:a,searchOptions:Z},(function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return l.a.createElement(u.a,{className:n.container},l.a.createElement(q.a,{className:n.textField},l.a.createElement(U.a,{htmlFor:"input-with-icon-adornment"},"Enter booking location"),l.a.createElement($.a,Object.assign({},t({placeholder:"Booking location ..."}),{startAdornment:l.a.createElement(V.a,{position:"start"},l.a.createElement(K.a,null))}))),l.a.createElement("div",null,i&&l.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#f0e0e0",cursor:"pointer"}:{backgroundColor:"white",cursor:"pointer"};return l.a.createElement("div",r(e,{className:t,style:a}),e.description)}))))}))}var te=a(15),ae=a(80),ne=a.n(ae),re=Object(c.a)((function(e){return{flex:{display:"flex"},grow:{flexGrow:1}}})),ie=function(e){var t=e.theme,a=e.services,n=e.itemQty,r=e.onSubmit,c=e.organic,y=e.pensionerRate,E=e.bookingDate,k=e.bookingAddr,h=e.toggleOrganic,O=e.togglePensionerRate,j=e.submitBooking,x=e.getAvailArtist,w=e.changeSelectedArtist,S=e.artistBooking,B=e.newBooking,C=e.setManageState,P=re(),N=a.items,D=a.cats,_=Object(o.useState)(E),A=Object(i.a)(_,2),M=A[0],z=A[1],I=Object(o.useState)(k),F=Object(i.a)(I,2),T=F[0],L=F[1];Object(o.useEffect)((function(){z(E),L(k)}),[k,E]);var Y=function(e){z(e)},Q=function(){for(var e=0,t=0,a=Object.keys(n);t<a.length;t++){var r=a[t],i=n[r];e+=N[r].timeOnsite*i}return M.getTime()+60*e*1e3},R=function(){var e=!0;return Object.keys(n).forEach((function(t){e=N[t].addOn&&e})),y&&1!==M.getDay()?(alert("Sorry, pensioner rate is only available on Mondays."),!1):!e||(alert("Sorry, add-on services* can not be booked on its own."),!1)};return l.a.createElement(u.a,{maxWidth:"sm",style:{paddingTop:20,paddingBottom:50}},l.a.createElement(m.a,{control:l.a.createElement(d.a,{checked:y,onChange:function(){return O()},value:"pensionerRate",color:"primary"}),label:"Monday pensioner rate (less 20%)"}),l.a.createElement(m.a,{control:l.a.createElement(d.a,{checked:c,onChange:function(){return h()},value:"organic",color:"primary"}),label:"Use organic products"}),D.map((function(e){return l.a.createElement(H,{theme:t,items:N,key:e.name,cat:e,organic:c,pensioner:y,artistBooking:S})})),l.a.createElement(b.a,{utils:p.a},l.a.createElement(g.a,{container:!0,justify:"space-between"},l.a.createElement(f.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Select booking date",value:M,onChange:Y,KeyboardButtonProps:{"aria-label":"change date"}}),l.a.createElement(v.a,{margin:"normal",id:"time-picker",label:"Select booking time",value:M,onChange:Y,KeyboardButtonProps:{"aria-label":"change time"}}))),l.a.createElement(ee,{address:T,changeAddr:function(e){L(e)}}),l.a.createElement("div",{className:P.flex},!B&&l.a.createElement(s.a,{variant:"text",color:"primary",onClick:function(){C("Default")}},"Cancel"),l.a.createElement("div",{className:P.grow}),l.a.createElement(s.a,{variant:"text",color:"primary",onClick:S?function(e){R()&&(j(M,new Date(Q()),T),r(1))}:function(e){if(R()){j(M,new Date(Q()),T);var t=te.d+"?date="+ne()(M).format("YYYY-MM-DD")+"&start_time="+ne()(M).format("HH:mm")+"&services="+Object.keys(n)+"&quantities="+Object.values(n)+"&event_addr="+T;x(t),w(0),r(1)}},size:"large",disabled:function(){for(var e=0,t=0,a=Object.keys(n);t<a.length;t++){var r=a[t];e+=n[r]}return!(e>0&&T&&M)}()},S?"Next":"Submit")))};t.a=Object(n.b)((function(e){return{organic:e.priceFactors.organic,pensionerRate:e.priceFactors.pensionerRate,bookingDate:e.bookingDateAddr.bookingDate,bookingAddr:e.bookingDateAddr.bookingAddr,itemQty:e.itemQty}}),(function(e){return{toggleOrganic:function(){return e(Object(r.P)())},togglePensionerRate:function(){return e(Object(r.Q)())},submitBooking:function(t,a,n){return e(Object(r.O)(t,a,n))},getAvailArtist:function(t){return e(Object(r.D)(t))},changeSelectedArtist:function(t){return e(Object(r.B)(t))}}}))(ie)},322:function(e,t,a){"use strict";var n=a(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(39)).default)(r.default.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight");t.default=i},323:function(e,t,a){"use strict";var n=a(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(39)).default)(r.default.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft");t.default=i},434:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(0),i=a.n(r),o=a(53),l=a(304),c=a(669),s=a(655),u=a(667),m=a(30),d=a(440);function g(e){var t=e.activeStep,a=function(e){return e?["Select service","Add people","Payment"]:["Select service","Add people","Payment or Update"]}(e.newBooking);return i.a.createElement(d.a,{maxWidth:"md",style:{paddingTop:20}},i.a.createElement(c.a,{activeStep:t,alternativeLabel:!0},a.map((function(e){return i.a.createElement(s.a,{key:e},i.a.createElement(u.a,null,e))}))),i.a.createElement(m.a,{variant:"h6",align:"center",gutterBottom:!0},function(e){switch(e){case 0:return"Select service items, time and location";case 1:return"Add artists and client to the booking";case 2:return"Payment";default:return"Unknown stepIndex"}}(t)))}var p=a(32),b=a(8),f=a(6),v=a(80),y=a.n(v),E=a(87),k=a(29),h=a(157),O=a(656),j=a(657),x=a(661),w=a(659),S=a(658),B=a(274),C=a(332),P=a.n(C),N=a(122),D=a(124),_=Object(k.a)((function(e){return{paper:{padding:e.spacing(3),color:e.palette.text.secondary,background:"linear-gradient(#f0e8e8, #e0d8d8)",width:"100%",overflowX:"auto"},flex:{display:"flex",marginTop:10},grow:{flexGrow:1},background:{backgroundColor:e.palette.primary.main},priceField:Object(n.a)({display:"none"},e.breakpoints.up("sm"),{display:"inline"}),priceEmbedded:Object(n.a)({display:"inline"},e.breakpoints.up("sm"),{display:"none"}),acknowledge:{display:"flex",marginTop:20,alignItems:"flexStart"},inline:{display:"inline",paddingTop:0}}}));var A=function(e){var t=e.saveBooking,a=e.assignedArtists,o=e.clientInfo,l=e.assignArtists,c=e.assignClient,s=e.bookingDate,u=e.bookingEnd,g=e.bookingAddr,p=e.items,b=e.itemQty,v=e.changeBookingStage,k=e.organic,C=e.pensioner,A=e.bookingValue,M=e.depositPayable,z=e.newBooking,I=e.artists,F=Object(r.useState)(a.map((function(e){return I[e]}))),T=Object(f.a)(F,2),L=T[0],Y=T[1],Q=_(),R=Object(r.useState)(!0),H=Object(f.a)(R,2),q=H[0],$=H[1],U=Object(r.useState)(o.client),V=Object(f.a)(U,2),W=V[0],K=V[1];Object(r.useEffect)((function(){L.length>0?$(!1):$(!0)}),[L]);var G=Object.keys(b);return i.a.createElement(d.a,{maxWidth:"sm",style:{paddingTop:20,paddingBottom:50}},i.a.createElement(h.a,{className:Q.paper},i.a.createElement(m.a,{variant:"subtitle1",align:"center",color:"textPrimary"},y()(s).format("dddd, Do MMMM YYYY")),i.a.createElement(m.a,{variant:"subtitle1",align:"center",color:"textPrimary",gutterBottom:!0},y()(s).format("LT")+" \u2013 "+y()(u).format("LT")),i.a.createElement(O.a,{size:"small","aria-label":"a dense table"},i.a.createElement(j.a,{className:Q.background},i.a.createElement(S.a,null,i.a.createElement(w.a,{align:"left",style:{width:"70%"}},i.a.createElement("b",null,"Booking location")))),i.a.createElement(x.a,null,i.a.createElement(S.a,null,i.a.createElement(w.a,{align:"left"},g)))),i.a.createElement("br",null),i.a.createElement(N.a,{artists:I,multiArtists:!0,clearable:!0,setTags:Y,tags:L,label:"Add artists"}),i.a.createElement("br",null),i.a.createElement(D.a,{setClient:K,client:W,label:"Add client"}),i.a.createElement("br",null),i.a.createElement(O.a,{size:"small","aria-label":"a dense table"},i.a.createElement(j.a,{className:Q.background},i.a.createElement(S.a,null,i.a.createElement(w.a,{align:"left",style:{width:"70%"}},i.a.createElement("b",null,"Services requested")),i.a.createElement(w.a,{align:"right",style:{width:"20%",padding:0}},i.a.createElement("div",{className:Q.priceField},i.a.createElement("b",null,"Unit price"))),i.a.createElement(w.a,{align:"right",style:{width:"10%"}},i.a.createElement("b",null,"Qty")))),i.a.createElement(x.a,null,G.map((function(e){return i.a.createElement(S.a,{key:e},i.a.createElement(w.a,{align:"left",style:{width:"70%"}},p[e].description,i.a.createElement("div",{className:Q.priceEmbedded}," - $"+((k?p[e].organicPrice:p[e].price)*(C?.8:1)).toFixed(2))),i.a.createElement(w.a,{align:"right",style:{width:"20%",padding:0}},i.a.createElement("div",{className:Q.priceField},"$"+((k?p[e].organicPrice:p[e].price)*(C?.8:1)).toFixed(2))),i.a.createElement(w.a,{align:"right",style:{width:"10%"}},b[e]))})))),C?i.a.createElement(B.a,{deleteIcon:i.a.createElement(P.a,null),onDelete:function(){},label:"Monday pensioner rate",color:"primary",size:"small"}):null,k?i.a.createElement(B.a,{deleteIcon:i.a.createElement(P.a,null),onDelete:function(){},label:"Use organic products",color:"primary",size:"small"}):null,i.a.createElement("hr",null),i.a.createElement(m.a,{variant:"subtitle2",align:"right",color:"textPrimary"},"TOTAL (GST INCL): $"+A)),i.a.createElement("div",{className:Q.flex},i.a.createElement(E.a,{variant:"text",color:"primary",size:"large",onClick:function(){l(L.map((function(e){return Number(e.id)}))),c(W),v(0)}},"back"),i.a.createElement("div",{className:Q.grow}),i.a.createElement(E.a,{variant:"text",color:"primary",size:"large",onClick:function(){l(L.map((function(e){return Number(e.id)}))),c(W);var e=y()(s).format("HH:mm"),a=Object(n.a)({artist_id_list:L.map((function(e){return Number(e.id)})),booking_date:y()(s).format("YYYY-MM-DD"),booking_time:e,booking_end_time:y()(u).format("HH:mm"),artist_start_time:e,booking_id:z?null:o.bookingId,created_datetime:null,event_address:g,quantities:Object.values(b),services:Object.keys(b).map((function(e){return Number(e)})),unit_prices:Object.keys(b).map((function(e){return p[e].price})),status:null,time_on_site:(u-s)/1e3/60,travel_distance:0,travel_duration:0,client_id:W.id,with_organic:k?1:0,with_pensioner_rate:C?1:0,paid_balance_total:null,paid_deposit_total:null,total_amount:A,paid_amount:z?M:A-o.paid,paid_type:z?"deposit":"balance",comment:""},"status","");t(a),v(2)},disabled:q},"confirm booking")))},M=(a(369),Object(p.b)((function(e){return{assignedArtists:e.assignedArtists,bookingDate:e.bookingDateAddr.bookingDate,bookingEnd:e.bookingDateAddr.bookingEnd,bookingAddr:e.bookingDateAddr.bookingAddr,itemQty:e.itemQty,organic:e.priceFactors.organic,pensioner:e.priceFactors.pensionerRate,clientInfo:e.clientInfo}}),(function(e){return{assignArtists:function(t){return e(Object(b.y)(t))},assignClient:function(t){return e(Object(b.z)(t))},saveBooking:function(t){return e(Object(b.H)(t))}}}))(A)),z=a(14),I=a.n(z),F=a(24),T=a(298),L=a(102),Y=a(118),Q=a(15);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=Object(k.a)((function(e){return{paper:{padding:e.spacing(3),color:e.palette.text.secondary,background:"linear-gradient(#f0e8e8, #e0d8d8)",width:"100%",overflowX:"auto"},textField:{width:"100%",marginTop:30},flex:{display:"flex",marginTop:10},container:{display:"flex"},grow:{flexGrow:1}}}));var $=function(e){e.theme;var t=e.changeBookingStage,a=e.depositPayable,n=e.resetBooking,o=e.addBooking,l=e.updateBooking,c=e.bookingData,s=e.newBooking,u=e.manageState,g=e.setManageState,p=e.comment,b=Object(r.useState)(p),v=Object(f.a)(b,2),y=v[0],k=v[1],O=s||c.paid_amount>0,j=q(),x=function(e){alert(e+" successful!"),n()},w=function(){var e=Object(F.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Q.l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,description:s?"deposit for booking":"balance for booking",amount:(100*c.paid_amount).toFixed(0)})});case 2:e.sent.ok?s?o(H({},c,{comment:y}),(function(){return x("Booking")})):l(H({},c,{comment:y}),(function(){return x("Checkout")})):alert("Stripe error. Please call to resolve this issue.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(d.a,{maxWidth:"sm",style:{paddingTop:20,paddingBottom:20}},i.a.createElement(h.a,{className:j.paper},s?i.a.createElement(m.a,{variant:"body1",align:"left",color:"textPrimary",gutterBottom:!0},"Deposit payable: $ ",a.toString()):i.a.createElement(m.a,{variant:"body1",align:"left",color:"textPrimary",gutterBottom:!0},"Balance payable: $ ",c.paid_amount.toString()),O&&i.a.createElement(T.a,{stripePublicKey:Y.b,handleCharge:w,loggedIn:!0,payMessage:"Client Pay"}),!s&&O&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.container},i.a.createElement("div",{className:j.grow}),i.a.createElement("p",null,"OR"),i.a.createElement("div",{className:j.grow})),i.a.createElement(E.a,{variant:"contained",onClick:function(){l(H({},c,{paid_type:"cash",comment:y}),(function(){return x("Checkout")}))},color:"primary",fullWidth:!0},"Cash Pay")),i.a.createElement(L.a,{id:"outlined-textarea",label:"Additional instructions",placeholder:"Any allergies, preferences, entrances, or any details about the room number if the client is staying in a hotel.",multiline:!0,value:y,className:j.textField,margin:"normal",variant:"outlined",onChange:function(e){k(e.target.value)}})),i.a.createElement("div",{className:j.flex},"Checkout"===u?i.a.createElement(E.a,{variant:"text",color:"primary",size:"large",onClick:function(){return g("Default")}},"Cancel"):i.a.createElement(E.a,{variant:"text",color:"primary",size:"large",onClick:function(){return t(1)}},"back"),i.a.createElement("div",{className:j.grow}),!s&&"Checkout"!==u&&O&&i.a.createElement(E.a,{variant:"text",color:"primary",size:"large",onClick:function(){l(H({},c,{paid_amount:0,paid_type:"none",comment:y}),(function(){return x("Update")}))}},"Update Booking")))},U=Object(p.b)((function(e){return{bookingData:e.storeActivation.bookingData,comment:e.clientInfo.comment}}),(function(e){return{resetBooking:function(){return e(Object(b.G)())},addBooking:function(t,a){return e(Object(b.x)(t,a))},updateBooking:function(t,a){return e(Object(b.R)(t,a))}}}))($);t.default=Object(o.f)((function(e){var t,a=e.bookingStage,o=e.changeBookingStage,c=e.resetBooking,s=e.services,u=e.theme,m=e.bookingValue,d=e.depositPayable,p=e.artists,b=e.newBooking,f=e.manageState,v=e.setManageState;return Object(r.useEffect)((function(){b&&c()}),[]),i.a.createElement(i.a.Fragment,null,"Checkout"===f?null:i.a.createElement(g,{activeStep:a,newBooking:b}),0===a?i.a.createElement(l.a,{onSubmit:o,services:s,theme:u,artistBooking:!0,newBooking:b,setManageState:v}):null,1===a?i.a.createElement(M,{changeBookingStage:o,theme:u,items:s.items,bookingValue:m,depositPayable:d,newBooking:b,artists:p}):null,2===a?i.a.createElement(U,(t={changeBookingStage:o,theme:u,items:s.items,bookingValue:m,depositPayable:d},Object(n.a)(t,"bookingValue",m),Object(n.a)(t,"newBooking",b),Object(n.a)(t,"manageState",f),Object(n.a)(t,"setManageState",v),t)):null)}))},602:function(e,t,a){"use strict";var n=a(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(39)).default)(r.default.createElement("path",{d:"M21.94 4.88c-.18-.53-.69-.88-1.26-.88H19.6l-.31-.97C19.15 2.43 18.61 2 18 2s-1.15.43-1.29 1.04L16.4 4h-1.07c-.57 0-1.08.35-1.26.88-.19.56.04 1.17.56 1.48l.87.52-.4 1.24c-.23.58-.04 1.25.45 1.62.23.17.51.26.78.26.31 0 .61-.11.86-.32l.81-.7.81.7c.25.21.55.32.86.32.27 0 .55-.09.78-.26.5-.37.68-1.04.45-1.62l-.39-1.24.87-.52c.51-.31.74-.92.56-1.48zM18 7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM13.49 10.51c-.43-.43-.94-.73-1.49-.93V8h-1v1.38c-.11-.01-.23-.03-.34-.03-1.02 0-2.05.39-2.83 1.17-.16.16-.3.34-.43.53L6 10.52c-1.56-.55-3.28.27-3.83 1.82-.27.75-.23 1.57.12 2.29.23.48.58.87 1 1.16-.38 1.35-.06 2.85 1 3.91s2.57 1.38 3.91 1c.29.42.68.77 1.16 1 .42.2.85.3 1.29.3.34 0 .68-.06 1.01-.17 1.56-.55 2.38-2.27 1.82-3.85l-.52-1.37c.18-.13.36-.27.53-.43.87-.87 1.24-2.04 1.14-3.17H16v-1h-1.59c-.19-.55-.49-1.06-.92-1.5zm-8.82 3.78c-.25-.09-.45-.27-.57-.51s-.13-.51-.04-.76c.19-.52.76-.79 1.26-.61l3.16 1.19c-1.15.6-2.63 1.11-3.81.69zm6.32 5.65c-.25.09-.52.08-.76-.04-.24-.11-.42-.32-.51-.57-.42-1.18.09-2.65.7-3.8l1.18 3.13c.18.52-.09 1.1-.61 1.28zm1.21-5.34l-.61-1.61c0-.01-.01-.02-.02-.03l-.06-.12c-.02-.04-.04-.07-.07-.11l-.09-.09-.09-.09c-.03-.03-.07-.05-.11-.07-.04-.02-.07-.05-.12-.06-.01 0-.02-.01-.03-.02l-1.6-.6c.36-.29.79-.46 1.26-.46.53 0 1.04.21 1.41.59.73.73.77 1.88.13 2.67z"}),"EmojiNature");t.default=i},649:function(e,t,a){"use strict";var n=a(1),r=a(34),i=a(3),o=a(0),l=a.n(o),c=(a(4),a(2)),s=a(5),u=a(157),m=a(7),d=a(11),g=a(33),p=l.a.forwardRef((function(e,t){var a=e.classes,r=e.className,o=e.color,s=void 0===o?"primary":o,u=e.value,d=e.valueBuffer,p=e.variant,b=void 0===p?"indeterminate":p,f=Object(i.a)(e,["classes","className","color","value","valueBuffer","variant"]),v=Object(g.a)(),y={},E={bar1:{},bar2:{}};if("determinate"===b||"buffer"===b)if(void 0!==u){y["aria-valuenow"]=Math.round(u);var k=u-100;"rtl"===v.direction&&(k=-k),E.bar1.transform="translateX(".concat(k,"%)")}else 0;if("buffer"===b)if(void 0!==d){var h=(d||0)-100;"rtl"===v.direction&&(h=-h),E.bar2.transform="translateX(".concat(h,"%)")}else 0;return l.a.createElement("div",Object(n.a)({className:Object(c.default)(a.root,a["color".concat(Object(m.a)(s))],r,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[b]),role:"progressbar"},y,{ref:t},f),"buffer"===b?l.a.createElement("div",{className:Object(c.default)(a.dashed,a["dashedColor".concat(Object(m.a)(s))])}):null,l.a.createElement("div",{className:Object(c.default)(a.bar,a["barColor".concat(Object(m.a)(s))],("indeterminate"===b||"query"===b)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[b]),style:E.bar1}),"determinate"===b?null:l.a.createElement("div",{className:Object(c.default)(a.bar,("indeterminate"===b||"query"===b)&&a.bar2Indeterminate,"buffer"===b?[a["color".concat(Object(m.a)(s))],a.bar2Buffer]:a["barColor".concat(Object(m.a)(s))]),style:E.bar2}))})),b=Object(s.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(d.e)(t,.62):Object(d.a)(t,.5)},a=t(e.palette.primary.main),n=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:n},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite",animationDelay:"1.15s"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(p),f=l.a.forwardRef((function(e,t){var a=e.activeStep,o=void 0===a?0:a,s=e.backButton,d=e.classes,g=e.className,p=e.LinearProgressProps,f=e.nextButton,v=e.position,y=void 0===v?"bottom":v,E=e.steps,k=e.variant,h=void 0===k?"dots":k,O=Object(i.a)(e,["activeStep","backButton","classes","className","LinearProgressProps","nextButton","position","steps","variant"]);return l.a.createElement(u.a,Object(n.a)({square:!0,elevation:0,className:Object(c.default)(d.root,d["position".concat(Object(m.a)(y))],g),ref:t},O),s,"text"===h&&l.a.createElement(l.a.Fragment,null,o+1," / ",E),"dots"===h&&l.a.createElement("div",{className:d.dots},Object(r.a)(new Array(E)).map((function(e,t){return l.a.createElement("div",{key:t,className:Object(c.default)(d.dot,t===o&&d.dotActive)})}))),"progress"===h&&l.a.createElement(b,Object(n.a)({className:d.progress,variant:"determinate",value:Math.ceil(o/(E-1)*100)},p)),f)}));t.a=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},positionBottom:{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionTop:{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionStatic:{},dots:{display:"flex",flexDirection:"row"},dot:{backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},dotActive:{backgroundColor:e.palette.primary.main},progress:{width:"50%"}}}),{name:"MuiMobileStepper"})(f)},666:function(e,t,a){"use strict";a.r(t);var n=a(32),r=a(8),i=a(6),o=a(0),l=a.n(o),c=a(53),s=a(20),u=a(80),m=a.n(u),d=a(302),g=a(30),p=a(29),b=a(440),f=a(157),v=a(649),y=a(87),E=a(323),k=a.n(E),h=a(322),O=a.n(h),j=a(602),x=a.n(j),w=a(214),S=a(93);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=Object(p.a)((function(e){return{paper:{padding:e.spacing(3),color:e.palette.text.secondary,background:"linear-gradient(#f0e8e8, #e0d8d8)",marginBottom:10},flex:{display:"flex",marginTop:10},grow:{flexGrow:1},progress:{display:"flex",justifyContent:"center",padding:40}}}));function N(e){var t=e.event,a=P(),n=0;return l.a.createElement(f.a,{className:a.paper,elevation:6},l.a.createElement(g.a,{variant:"h6",align:"center",color:"textPrimary"},m()(t.start).format("dddd, YYYY/MM/DD")),l.a.createElement(g.a,{variant:"h6",align:"center",color:"textPrimary",gutterBottom:!0},m()(t.start).format("LT")+" \u2013 "+m()(t.end).format("LT")),l.a.createElement("div",null,l.a.createElement(d.f,null),l.a.createElement("span",null,t.address)),l.a.createElement("div",null,l.a.createElement(d.h,null),l.a.createElement("span",null,t.client.name+" "),l.a.createElement(d.g,null),l.a.createElement("span",null,t.client.phone+" "),t.organic?l.a.createElement(x.a,{color:"primary"}):null),l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(d.e,null),l.a.createElement("span",null,t.total+" "),l.a.createElement(d.i,null),l.a.createElement("span",null,t.artists.map((function(e){return e.name})).join(", ")),l.a.createElement("ul",null,t.serviceItems.map((function(e){return l.a.createElement("li",{key:n++},e)})))))}var D=function(e){var t=e.events,a=e.eventsFetched,n=e.changeBookingStage,r=e.setManageState,c=e.loadBooking,s=e.saveBooking,u=e.activeStep,m=e.setActiveStep,d=P(),p=Object(o.useContext)(S.a).bookingsData.data,f=Object(o.useState)(0),E=Object(i.a)(f,2),h=E[0],j=E[1];Object(o.useEffect)((function(){j(t.length)}),[a,t.length]);return l.a.createElement(b.a,{maxWidth:"sm",style:{paddingTop:20,paddingBottom:20}},!a&&l.a.createElement("div",{className:d.progress},l.a.createElement(w.a,{color:"primary"})),a&&l.a.createElement(l.a.Fragment,null,t.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(N,{event:t[u]}),l.a.createElement(v.a,{steps:h,position:"static",variant:"text",activeStep:u,nextButton:l.a.createElement(y.a,{size:"small",onClick:function(){m((function(e){return e+1}))},disabled:u===h-1},"Next event",l.a.createElement(O.a,null)),backButton:l.a.createElement(y.a,{size:"small",onClick:function(){m((function(e){return e-1}))},disabled:0===u},l.a.createElement(k.a,null),"Prev event")}),l.a.createElement("div",{className:d.flex},l.a.createElement(y.a,{variant:"text",color:"primary",size:"large",onClick:function(){c(C({},p[t[u].id],{client:t[u].client})),n(0),r("Edit")}},"Edit"),l.a.createElement("div",{className:d.grow}),l.a.createElement(y.a,{variant:"text",color:"primary",size:"large",onClick:function(){var e=t[u].id,a=p[e];c(C({},a,{client:t[u].client})),s(C({},a,{paid_type:"balance",paid_amount:a.total_amount-a.paid_amount})),n(2),r("Checkout")}},"Checkout"))):l.a.createElement(g.a,{variant:"h6",align:"center",color:"textPrimary"},"No booking found")))},_=Object(n.b)(null,(function(e){return{loadBooking:function(t){return e(Object(r.F)(t))},saveBooking:function(t){return e(Object(r.H)(t))}}}))(D),A=a(434),M=Object(c.f)((function(e){var t=e.events,a=e.eventsFetched,n=e.setActivateBookings,r=e.bookingStage,c=e.changeBookingStage,s=e.services,u=e.bookingValue,m=e.depositPayable,d=e.artists,g=Object(o.useState)("Default"),p=Object(i.a)(g,2),b=p[0],f=p[1],v=Object(o.useState)(0),y=Object(i.a)(v,2),E=y[0],k=y[1];return Object(o.useEffect)((function(){return n(!0),function(){n(!1)}}),[]),l.a.createElement(l.a.Fragment,null,"Default"===b?l.a.createElement(_,{events:t,eventsFetched:a,changeBookingStage:c,setManageState:f,activeStep:E,setActiveStep:k}):null,"Edit"===b||"Checkout"===b?l.a.createElement(A.default,{bookingStage:r,changeBookingStage:c,services:s,bookingValue:u,depositPayable:m,artists:d,newBooking:!1,manageState:b,setManageState:f}):null)}));t.default=Object(n.b)(null,(function(e){return{setActivateBookings:function(t){return e(Object(r.J)(t))}}}))(M)}}]);
//# sourceMappingURL=8.cf6341b3.chunk.js.map