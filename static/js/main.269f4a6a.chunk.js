(this.webpackJsonphotm=this.webpackJsonphotm||[]).push([[4],{118:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a="pk_test_a0vfdte94kBhPrDqosS5OnPd00A0fS0egz",r="Basic ZEtkWDBTM0wwSERsOnAxMk9GeFNMczVVNXVxdEEyQnVTYkFuUg=="},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),i=n(102),o=n(160);function c(e){var t=e.tags,n=e.setTags,a=e.multiArtists,c=e.clearable,s=e.artists,u=e.label,l=Object.values(s).sort((function(e,t){var n=e.state.toUpperCase()+e.name,a=t.state.toUpperCase()+t.name;return n<a?-1:n>a?1:0}));return r.a.createElement(o.a,{multiple:a,id:"artist-list",disableClearable:c,filterSelectedOptions:!0,options:l,groupBy:function(e){return e.state.toUpperCase()},getOptionLabel:function(e){return e.name},value:t,onChange:function(e,t){n(t)},renderInput:function(e){return r.a.createElement(i.a,Object.assign({},e,{variant:"outlined",placeholder:"Artist name",label:u,fullWidth:!0}))}})}},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(21),r=n(14),i=n.n(r),o=n(25),c=n(6),s=n(0),u=n.n(s),l=n(102),d=n(160),g=n(211),f=n(15),m=n(20),b=n.n(m);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=e.client,n=e.setClient,a=e.label,r=Object(s.useState)(!1),m=Object(c.a)(r,2),p=m[0],O=m[1],v=Object(s.useState)(null!==t?[t]:[]),E=Object(c.a)(v,2),j=E[0],y=E[1],k=Object(s.useState)(""),S=Object(c.a)(k,2),w=S[0],_=S[1],C=p&&w.length>=3,T=Object(s.useState)(!1),A=Object(c.a)(T,2),I=A[0],N=A[1];Object(s.useEffect)((function(){C&&!I&&Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",headers:{Authorization:f.a},url:f.o+"?search="+w},N(!0),e.next=4,b()(t);case 4:n=e.sent,y(n.data.map((function(e){return{id:e.id,name:e.name,phone:e.meta.billing_phone[0]}}))),N(!1);case 7:case"end":return e.stop()}}),e)})))()}),[w,C]);return u.a.createElement(d.a,{id:"asynchronous-client",open:p,onOpen:function(){O(!0)},onClose:function(){O(!1),_(""),y([])},getOptionLabel:function(e){return e.name+" - "+e.phone},options:j,loading:I,value:t,onChange:function(e,t){n(t)},onInputChange:function(e,t,n){"input"===n?_(t):"clear"===n&&_("")},renderInput:function(e){return u.a.createElement(l.a,Object.assign({},e,{label:a,fullWidth:!0,variant:"outlined",placeholder:"Client name or username",InputProps:h({},e.InputProps,{endAdornment:u.a.createElement(u.a.Fragment,null,I?u.a.createElement(g.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}},137:function(e,t,n){e.exports=n.p+"static/media/logo.a36b5832.png"},139:function(e,t,n){"use strict";var a=n(33),r=n(64),i=n(14),o=n.n(i),c=n(25),s=n(6),u=n(21),l=n(0),d=n.n(l),g=n(87),f=n(102),m=n(205),b=n(210),p=n(209),h=n(30),O=n(15),v=n(20),E=n.n(v),j=n(255),y=Object(h.a)((function(){return{container1:{display:"flex",margin:20},grow:{flexGrow:1},container2:{display:"flex",flexDirection:"column",alignContent:"center"},button:{display:"flex",marginLeft:15,marginRight:15,marginTop:20,marginBottom:20}}}));function k(e){var t=e.triggerOpen,n=Object(l.useState)(!1),a=Object(s.a)(n,2),r=a[0],i=a[1],u=Object(l.useRef)(!1),h=Object(l.useState)(""),v=Object(s.a)(h,2),k=v[0],S=v[1],w=y();Object(l.useEffect)((function(){u.current?i(!0):u.current=!0}),[t]);var _=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.j+k,e.next=3,E()(t);case 3:200===(n=e.sent).status&&"ok"===n.data.status?(alert("An email to reset your password has been sent to you."),i(!1)):alert("username or email not found");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(m.a,{open:r},d.a.createElement(p.a,null,d.a.createElement(j.a,null,"To reset password, please enter your username or email."),d.a.createElement(f.a,{autoFocus:!0,margin:"dense",label:"username or email",type:"userLogin",fullWidth:!0,onChange:function(e){S(e.target.value)}})),d.a.createElement(b.a,{className:w.button},d.a.createElement(g.a,{variant:"contained",onClick:function(){i(!1)},color:"primary",fullWidth:!0},"Cancel"),d.a.createElement(g.a,{variant:"contained",onClick:_,color:"primary",fullWidth:!0},"Submit")))}var S=n(259),w=n(137),_=Object(h.a)((function(e){return{container1:{display:"flex",margin:20},grow:{flexGrow:1},button1:{marginLeft:15,marginRight:15,marginTop:10,marginBottom:10},logo:Object(u.a)({maxWidth:"50%",width:"auto",height:"auto"},e.breakpoints.down("sm"),{maxHeight:120})}}));function C(e){var t=e.triggerOpen,n=e.signinUser,a=Object(l.useState)(!1),r=Object(s.a)(a,2),i=r[0],u=r[1],h=Object(l.useRef)(!1),v=Object(l.useState)(""),j=Object(s.a)(v,2),y=j[0],k=j[1],C=Object(l.useState)(""),T=Object(s.a)(C,2),A=T[0],I=T[1],N=Object(l.useState)(""),x=Object(s.a)(N,2),D=x[0],P=x[1],F=Object(l.useState)(""),M=Object(s.a)(F,2),R=M[0],U=M[1],L=Object(l.useState)(""),B=Object(s.a)(L,2),W=B[0],G=B[1],H=Object(l.useState)(""),Y=Object(s.a)(H,2),q=Y[0],V=Y[1],K=Object(l.useState)(""),z=Object(s.a)(K,2),Q=z[0],J=z[1],$=Object(l.useState)(""),X=Object(s.a)($,2),Z=X[0],ee=X[1],te=Object(l.useState)(""),ne=Object(s.a)(te,2),ae=ne[0],re=ne[1],ie=Object(l.useState)(""),oe=Object(s.a)(ie,2),ce=oe[0],se=oe[1],ue=Object(l.useState)(""),le=Object(s.a)(ue,2),de=le[0],ge=le[1],fe=_(),me=Object(l.useState)(!0),be=Object(s.a)(me,2),pe=be[0],he=be[1];Object(l.useEffect)((function(){he(""===y||""===A||""===D||""===R||""===W||""===de)}),[y,A,D,R,W,de]),Object(l.useEffect)((function(){h.current?u(!0):h.current=!0}),[t]);var Oe=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a,r,i,c,s,l,d,g,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()(O.h);case 2:if(200!==(t=e.sent).status||"ok"!==t.data.status){e.next=38;break}return a=t.data.nonce,(r=new FormData).set("username",y),r.set("user_pass",A),r.set("email",D),r.set("display_name",R+" "+W),r.set("nonce",a),i={method:"post",headers:{"Content-Type":"multipart/form-data"},url:O.i,data:r},e.next=14,E()(i);case 14:if(200!==(c=e.sent).status||"ok"!==c.data.status){e.next=35;break}return s=c.data.cookie,l=c.data.user_id,(d=new FormData).set("cookie",s),d.set("billing_firstname",R),d.set("billing_lastname",W),d.set("billing_company",q),d.set("billing_address_1",Q),d.set("billing_city",Z),d.set("billing_state",ae),d.set("billing_postcode",ce),d.set("billing_phone",de),g={method:"post",headers:{"Content-Type":"multipart/form-data"},url:O.n,data:d},e.next=31,E()(g);case 31:200===(f=e.sent).status&&"ok"===f.data.status?(n({firstName:R,lastName:W,nickName:R,email:D,id:l,loggedIn:!0}),alert("You are now registered for HOTM online booking!"),u(!1)):alert(f.data.error),e.next=36;break;case 35:alert(c.data.error);case 36:e.next=39;break;case 38:alert(t.data.error);case 39:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(m.a,{open:i,onBackdropClick:function(){return u(!1)}},d.a.createElement("div",{className:fe.container1},d.a.createElement("div",{className:fe.grow}),d.a.createElement("img",{className:fe.logo,src:w,alt:"Hair on the move logo"}),d.a.createElement("div",{className:fe.grow})),d.a.createElement(p.a,null,d.a.createElement(S.a,{container:!0},d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{autoFocus:!0,required:!0,margin:"dense",label:"username",type:"username",fullWidth:!0,onChange:function(e){k(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{required:!0,margin:"dense",label:"password",type:"password",fullWidth:!0,onChange:function(e){I(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:12},d.a.createElement(f.a,{required:!0,margin:"dense",label:"email",type:"email",fullWidth:!0,onChange:function(e){P(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{required:!0,margin:"dense",label:"first name",type:"firstname",fullWidth:!0,onChange:function(e){U(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{required:!0,margin:"dense",label:"last name",type:"lastname",fullWidth:!0,onChange:function(e){G(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:12},d.a.createElement(f.a,{margin:"dense",label:"company",type:"company",fullWidth:!0,onChange:function(e){V(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:12},d.a.createElement(f.a,{margin:"dense",label:"address",type:"address",fullWidth:!0,onChange:function(e){J(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{margin:"dense",label:"city",type:"city",fullWidth:!0,onChange:function(e){ee(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{margin:"dense",label:"postcode",type:"postcode",fullWidth:!0,onChange:function(e){se(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{margin:"dense",label:"state abbr.",type:"state",fullWidth:!0,onChange:function(e){re(e.target.value)}})),d.a.createElement(S.a,{item:!0,xs:6},d.a.createElement(f.a,{required:!0,margin:"dense",label:"phone",type:"phone",fullWidth:!0,onChange:function(e){ge(e.target.value)}})))),d.a.createElement(b.a,{className:fe.button1},d.a.createElement(g.a,{variant:"contained",onClick:Oe,color:"primary",fullWidth:!0,disabled:pe},"Submit")))}var T=n(137),A=Object(h.a)((function(e){return{container1:{display:"flex",margin:20},container2:{display:"flex"},grow:{flexGrow:1},button1:{marginLeft:15,marginRight:15,marginTop:20},button2:{marginLeft:15,marginRight:15,marginTop:20,marginBottom:20},logo:Object(u.a)({maxWidth:"50%",width:"auto",height:"auto"},e.breakpoints.down("sm"),{maxHeight:120})}}));t.a=Object(a.b)(null,(function(e){return{signinUser:function(t){return e(Object(r.c)(t))}}}))((function(e){var t=e.theme,n=e.triggerOpen,a=e.signinUser,r=e.initOpen,i=Object(l.useState)(!1),u=Object(s.a)(i,2),h=u[0],v=u[1],j=Object(l.useRef)(!1),y=Object(l.useState)(""),S=Object(s.a)(y,2),w=S[0],_=S[1],I=Object(l.useState)(""),N=Object(s.a)(I,2),x=N[0],D=N[1],P=Object(l.useState)(!1),F=Object(s.a)(P,2),M=F[0],R=F[1],U=Object(l.useState)(!1),L=Object(s.a)(U,2),B=L[0],W=L[1],G=A(t);Object(l.useEffect)((function(){j.current?v(!0):(j.current=!0,v(r))}),[n,r]);var H=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n,r,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).set("username",w),t.set("password",x),n={method:"post",headers:{"Content-Type":"multipart/form-data"},url:O.c,data:t},e.next=6,E()(n);case 6:200===(r=e.sent).status&&r.data.user?(i=r.data.user,c=!1,i.capabilities.staff_members&&(c=!0),s={firstName:i.firstname,lastName:i.lastname,nickName:i.nickname,email:i.email,id:i.id,loggedIn:!0,isArtist:c},a(s),v(!1)):alert("login failed");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,{open:h,onBackdropClick:function(){return v(!1)}},d.a.createElement("div",{className:G.container1},d.a.createElement("div",{className:G.grow}),d.a.createElement("img",{className:G.logo,src:T,alt:"Hair on the move logo"}),d.a.createElement("div",{className:G.grow})),d.a.createElement(p.a,null,d.a.createElement(f.a,{autoFocus:!0,margin:"dense",label:"username or email",type:"username",fullWidth:!0,onChange:function(e){_(e.target.value)}}),d.a.createElement(f.a,{margin:"dense",label:"password",type:"password",fullWidth:!0,onChange:function(e){D(e.target.value)}})),d.a.createElement(b.a,{className:G.button1},d.a.createElement(g.a,{variant:"contained",onClick:H,color:"primary",fullWidth:!0},"Sign in")),d.a.createElement(b.a,{className:G.container2},d.a.createElement("div",{className:G.grow}),d.a.createElement(g.a,{variant:"text",onClick:function(){v(!1),R(!M)},color:"primary"},"Forget password?"),d.a.createElement("div",{className:G.grow})),d.a.createElement("div",{className:G.container2},d.a.createElement("div",{className:G.grow}),d.a.createElement("p",null,"OR"),d.a.createElement("div",{className:G.grow})),d.a.createElement(b.a,{className:G.button2},d.a.createElement(g.a,{variant:"contained",onClick:function(){v(!1),W(!B)},color:"primary",fullWidth:!0},"Register"))),d.a.createElement(k,{triggerOpen:M}),d.a.createElement(C,{triggerOpen:B,signinUser:a}))}))},15:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"k",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"n",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"m",(function(){return O})),n.d(t,"l",(function(){return v}));var a=n(118),r="https://procomhost.com",i=r+"/hotm_booking/api/v0.8",o=i+"/services",c=i+"/artists",s=i+"/bookings",u=i+"/get_available_artists.php",l=r+"/api/get_nonce/?controller=user&method=register",d=r+"/api/user/register",g=r+"/api/user/update_user_meta_vars",f=r+"/api/auth/generate_auth_cookie",m=r+"/api/user/retrieve_password/?user_login=",b=r+"/wp-json/wp/v2/users",p=a.a,h="https://www.instagram.com/explore/tags/",O=r+"/terms-conditions/",v="https://boiling-shore-55046.herokuapp.com/charge"},173:function(e,t,n){e.exports=n(204)},178:function(e,t,n){},183:function(e,t,n){},203:function(e,t,n){e.exports=n.p+"static/media/logo192.4d162816.png"},204:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),o=n.n(i),c=(n(178),n(90)),s=n(91),u=n(94),l=n(92),d=n(95),g=n(33),f=n(268),m=n(155),b=(n(183),n(6)),p=n(82),h=n(53),O=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(a.Component),v=Object(h.f)(O),E=n(267),j=n(21),y=n(30),k=n(212),S=n(262),w=n(149),_=n.n(w),C=n(158),T=n(258),A=n(263),I=n(265),N=n(266),x=n(269),D=n(31),P=n(264),F=n(106),M=n.n(F),R=n(148),U=n.n(R),L=n(113),B=n.n(L),W=n(146),G=n.n(W),H=n(150),Y=n.n(H),q=n(152),V=n.n(q),K=n(153),z=n.n(K),Q=n(147),J=n.n(Q),$=n(151),X=n.n($),Z=n(139),ee=n(64),te=n(8),ne=n(87),ae=n(205),re=n(210),ie=n(209),oe=n(145),ce=n.n(oe),se=Object(y.a)((function(){return{container1:{display:"flex",margin:20},grow:{flexGrow:1},container2:{display:"flex",flexDirection:"column",alignContent:"center"},button:{display:"flex",marginLeft:15,marginRight:15,marginTop:20,marginBottom:20}}}));var ue=Object(g.b)((function(e){return{firstName:e.userInfo.firstName,lastName:e.userInfo.lastName,email:e.userInfo.email}}),(function(e){return{signoutUser:function(){return e(Object(ee.d)())},resetBooking:function(){return e(Object(te.G)())}}}))((function(e){var t=e.firstName,n=e.lastName,i=e.email,o=e.triggerOpen,c=e.signoutUser,s=e.resetBooking,u=Object(a.useState)(!1),l=Object(b.a)(u,2),d=l[0],g=l[1],f=Object(a.useRef)(!1),m=se();return Object(a.useEffect)((function(){f.current?g(!0):f.current=!0}),[o]),r.a.createElement(ae.a,{maxWidth:"xs",fullWidth:!0,open:d},r.a.createElement("div",{className:m.container1},r.a.createElement("div",{className:m.grow}),r.a.createElement(ce.a,{color:"primary",fontSize:"large"}),r.a.createElement("div",{className:m.grow})),r.a.createElement(ie.a,{className:m.container2},r.a.createElement(D.a,{variant:"h6",align:"center"},t+" "+n),r.a.createElement(D.a,{variant:"body2",align:"center"},i)),r.a.createElement(re.a,{className:m.button},r.a.createElement(ne.a,{variant:"contained",onClick:function(){g(!1)},color:"primary",fullWidth:!0},"Cancel"),r.a.createElement(ne.a,{variant:"contained",onClick:function(){c(),s(),g(!1)},color:"primary",fullWidth:!0},"Sign out")))})),le=n(260),de=n(119),ge=n(22),fe=n(261),me=n(122),be=n(124),pe=Object(y.a)((function(e){return{button:{marginLeft:15,marginRight:15,marginTop:20,marginBottom:20}}}));var he=Object(g.b)((function(e){return{bookingFilter:e.bookingFilter}}),(function(e){return{setFromDate:function(t){return e(Object(te.M)(t))},setToDate:function(t){return e(Object(te.N)(t))},setArtist:function(t){return e(Object(te.K)(t))},setClient:function(t){return e(Object(te.L)(t))},searchBooking:function(){return e(Object(te.I)())}}}))((function(e){var t=e.theme,n=e.artists,i=e.triggerOpen,o=e.bookingFilter,c=e.setFromDate,s=e.setToDate,u=e.setArtist,l=e.setClient,d=e.searchBooking,g=o.fromDate,f=o.toDate,m=o.artist,p=o.client,h=Object(a.useState)(!1),O=Object(b.a)(h,2),v=O[0],E=O[1],j=Object(a.useRef)(!1),y=pe(t);return Object(a.useEffect)((function(){j.current?E(!0):j.current=!0}),[i]),r.a.createElement(ae.a,{open:v,onBackdropClick:function(){return E(!1)}},r.a.createElement(le.a,{id:"simple-dialog-title"},"Filters for booking search"),r.a.createElement(ie.a,null,r.a.createElement(ge.a,{utils:de.a},r.a.createElement(fe.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Select from date",value:g,onChange:c,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(fe.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Select to date",value:f,onChange:s,KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(me.a,{artists:n,multiArtists:!1,clearable:!1,setTags:u,tags:m,label:"Select artist"}),r.a.createElement("br",null),r.a.createElement(be.a,{setClient:l,client:p,label:"Select client"})),r.a.createElement(re.a,{className:y.button},r.a.createElement(ne.a,{variant:"contained",onClick:function(){d(),E(!1)},color:"primary",fullWidth:!0},"Search")))})),Oe=n(15),ve=n(203),Ee=Object(y.a)((function(e){return{grow:{flexGrow:1},title:Object(j.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:{display:"flex",alignItems:"center"}}})),je=[{label:"Add a booking",pathname:"/",icon:r.a.createElement(M.a,null)},{label:"Artist add a booking",pathname:"/artist",icon:r.a.createElement(G.a,null)},{label:"Manage bookings",pathname:"/manage",icon:r.a.createElement(J.a,null)},{label:"Booking calendar",pathname:"/calendar",icon:r.a.createElement(U.a,null)},{label:"Go to Hair on the Move",pathname:Oe.f,external:!0,icon:r.a.createElement(B.a,null)}],ye=[{label:"Add a booking",pathname:"/",icon:r.a.createElement(M.a,null)},{label:"Go to Hair on the Move",pathname:Oe.f,external:!0,icon:r.a.createElement(B.a,null)}];var ke=Object(h.f)((function(e){var t,n=e.location,i=e.bookingValue,o=e.loggedIn,c=e.isArtist,s=e.artists,u=Ee(),l=Object(a.useState)(!1),d=Object(b.a)(l,2),g=d[0],f=d[1],m=Object(a.useState)(!1),h=Object(b.a)(m,2),O=h[0],v=h[1],E=Object(a.useState)(!1),j=Object(b.a)(E,2),y=j[0],w=j[1],F=Object(a.useState)(!1),M=Object(b.a)(F,2),R=M[0],U=M[1],L=n.pathname,B="/"===L||"/artist"===L,W="/manage"===L||"/calendar"===L,G=c?je:ye,H=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&f(e)}};switch(L){case"/calendar":t="Booking calendar";break;case"/manage":t="Manage bookings";break;case"/artist":t="Artist add a booking";break;default:t="Add a booking"}return r.a.createElement("div",{className:u.grow},r.a.createElement(S.a,{color:"secondary",position:"static"},r.a.createElement(k.a,null,r.a.createElement("img",{width:60,src:ve,alt:"Hair on the move logo"}),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{onClick:H(!0),color:"inherit","aria-label":"Menu"},r.a.createElement(_.a,null)),r.a.createElement("div",{className:u.title},r.a.createElement(D.a,{variant:"h6"},t)),r.a.createElement(x.a,{anchor:"left",open:g,onClose:H(!1)},r.a.createElement("div",{role:"presentation",onClick:H(!1),onKeyDown:H(!1)},r.a.createElement(T.a,null,G.map((function(e){return r.a.createElement(A.a,{component:e.external?P.a:p.b,href:e.external?e.pathname:null,to:e.external?null:{pathname:e.pathname,search:n.search},button:!0,key:e.label,target:e.external?"_blank":null},r.a.createElement(I.a,null,e.icon),r.a.createElement(N.a,{primary:e.label}))})))))),r.a.createElement("div",{className:u.grow}),r.a.createElement("div",{className:u.sectionDesktop},B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{fontSize:"small"}),r.a.createElement("span",null," $"+i)),W&&r.a.createElement(C.a,{edge:"end",color:"inherit",onClick:function(e){e.preventDefault(),U(!R)}},r.a.createElement(X.a,null)),r.a.createElement(C.a,{edge:"end",color:"default",onClick:function(e){e.preventDefault(),o?w(!y):v(!O)}},o?r.a.createElement(V.a,{color:"primary"}):r.a.createElement(z.a,{style:{color:"white"}})))),r.a.createElement(ue,{triggerOpen:y}),r.a.createElement(Z.a,{triggerOpen:O,initOpen:!1}),r.a.createElement(he,{triggerOpen:R,artists:s})))})),Se=n(93),we=n(86),_e=n(211),Ce=Object(a.lazy)((function(){return Promise.all([n.e(1),n.e(9)]).then(n.bind(null,662))})),Te=Object(a.lazy)((function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(10)]).then(n.bind(null,431))})),Ae=Object(a.lazy)((function(){return Promise.all([n.e(1),n.e(0),n.e(3),n.e(2),n.e(8)]).then(n.bind(null,663))})),Ie=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(7),n.e(11)]).then(n.bind(null,665))})),Ne=function(e){var t=e.theme,n=e.bookingStage,i=e.changeBookingStage,o=e.resetBooking,c=e.priceFactors,s=e.itemQty,u=e.loggedIn,l=e.isArtist,d=Object(a.useContext)(Se.a),g=d.services,f=d.servicesFetched,m=d.events,O=d.eventsFetched,j=d.artists,y=Object(a.useState)(0),k=Object(b.a)(y,2),S=k[0],w=k[1],_=Object(a.useState)(0),C=Object(b.a)(_,2),T=C[0],A=C[1];return Object(a.useEffect)((function(){w(Object(we.a)(g.items,c,s)),A(Object(we.b)(S))}),[g.items,c,s,S]),r.a.createElement(p.a,null,r.a.createElement(v,null,r.a.createElement(E.a,null),r.a.createElement(ke,{bookingValue:S,loggedIn:u,isArtist:l,artists:j}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(_e.a,null)},f&&r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Ce,{theme:t,services:g,bookingStage:n,changeBookingStage:i,bookingValue:S,depositPayable:T,artists:j,resetBooking:o})}}),r.a.createElement(h.a,{exact:!0,path:"/artist",render:function(){return r.a.createElement(Te,{theme:t,services:g,bookingStage:n,changeBookingStage:i,bookingValue:S,depositPayable:T,artists:j,newBooking:!0,resetBooking:o})}}),r.a.createElement(h.a,{path:"/manage",render:function(){return r.a.createElement(Ae,{events:m,eventsFetched:O,services:g,bookingStage:n,changeBookingStage:i,bookingValue:S,depositPayable:T,artists:j})}}),r.a.createElement(h.a,{path:"/calendar",render:function(){return r.a.createElement(Ie,{events:m})}})))))},xe=Object(g.b)((function(e){return{priceFactors:e.priceFactors,itemQty:e.itemQty,artists:e.artists,clients:e.clients,bookings:e.bookings,bookingStage:e.bookingStage.stage,loggedIn:e.userInfo.loggedIn,isArtist:e.userInfo.isArtist}}),(function(e){return{changeBookingStage:function(t){return e(Object(te.A)(t))},resetBooking:function(){return e(Object(te.G)())}}}))(Ne),De=n(63),Pe=n(154),Fe={organic:!1,pensionerRate:!1};var Me={bookingDate:null,bookingEnd:null,bookingAddr:""};var Re={client:null,comment:"",balance:null,paid:null,bookingId:null};var Ue={ids:[],recs:[],isLoading:!1,hasErr:!1};var Le={servicesActive:!0,artistsActive:!0,bookingsActive:!1,bookingTrigger:!1,requestMethod:"get",data:{},callMe:null,bookingData:{}};var Be=new Date,We={fromDate:new Date,toDate:Be.setDate(Be.getDate()+7),artist:null,client:null};var Ge={firstName:"",lastName:"",nickName:"",email:"",id:"",phone:"",loggedIn:!1,isArtist:!1};var He=Object(De.c)({priceFactors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.f:return Object.assign({},e,{organic:!e.organic});case te.g:return Object.assign({},e,{pensionerRate:!e.pensionerRate});case te.l:return Object.assign({},{organic:1===t.booking.with_organic,pensionerRate:1===t.booking.with_pensioner_rate});case te.n:return Fe;default:return e}},bookingDateAddr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.v:return{bookingDate:t.bookingDate,bookingEnd:t.bookingEnd,bookingAddr:t.bookingAddr};case te.l:var n=t.booking;return{bookingDate:new Date(n.booking_date+" "+n.booking_time+":00"),bookingEnd:new Date(n.booking_date+" "+n.booking_end_time+":00"),bookingAddr:n.event_address};case te.n:return Me;default:return e}},bookingStage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stage:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.e:return Object.assign({},e,{stage:t.stage});case te.n:return{stage:0};default:return e}},selectedArtist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.t:return Object.assign({},e,{order:t.order});case te.n:return{order:0};default:return e}},assignedArtists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.c:return t.artistIds;case te.l:return t.booking.artist_id_list;case te.n:return[];default:return e}},clientInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.l:return Object.assign({},{client:t.booking.client,comment:t.booking.comment,balance:t.booking.total_amount-t.booking.paid_amount,paid:t.booking.paid_amount,bookingId:t.booking.booking_id});case te.d:return Object.assign({},e,{client:t.client});case te.n:return Re;default:return e}},availArtists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.j:return Object.assign({},e,{ids:[],recs:[],isLoading:!0,hasErr:!1});case te.m:var n=[],a=t.payload,r=!0,i=!1,o=void 0;try{for(var c,s=a[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;n.push(u.artist_id_list[0])}}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return Object.assign({},e,{isLoading:!1,hasErr:!1,ids:n,recs:a});case te.i:return Object.assign({},e,{ids:[],recs:[],isLoading:!1,hasErr:!0});case te.n:return Ue;default:return e}},itemQty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=0,a=t.itemId;switch(a in e&&(n=e[a]),t.type){case te.k:return n+=1,Object.assign({},e,Object(j.a)({},a,n));case te.h:if(n>0&&(n-=1),n>0)return Object.assign({},e,Object(j.a)({},a,n));var r=Object.assign({},e);return delete r[a],Object.assign({},r);case te.l:for(var i=t.booking.services,o=t.booking.quantities,c={},s=0;s<i.length;s++)c[i[s].toString()]=o[s];return Object.assign({},c);case te.n:return{};default:return e}},storeActivation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.a:return Object.assign({},e,{bookingsActive:t.val,requestMethod:"get"});case te.p:return Object.assign({},e,{bookingsActive:!0,requestMethod:"get",bookingTrigger:!e.bookingTrigger});case te.b:return Object.assign({},e,{bookingsActive:!0,requestMethod:"post",data:t.payload,bookingTrigger:!e.bookingTrigger,callMe:t.callMe});case te.w:return Object.assign({},e,{bookingsActive:!0,requestMethod:"put",data:t.payload,bookingTrigger:!e.bookingTrigger,callMe:t.callMe});case te.o:return Object.assign({},e,{bookingData:t.payload});case te.n:return Le;default:return e}},bookingFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.s:return Object.assign({},e,{fromDate:t.val});case te.u:return Object.assign({},e,{toDate:t.val});case te.q:return Object.assign({},e,{artist:t.val});case te.r:return Object.assign({},e,{client:t.val});default:return e}},userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.a:return Object.assign({},e,{firstName:t.payload.firstName,lastName:t.payload.lastName,nickName:t.payload.nickName,email:t.payload.email,id:t.payload.id,loggedIn:t.payload.loggedIn,isArtist:t.payload.isArtist});case ee.b:return Object.assign({},Ge);default:return e}}}),Ye=Object(De.d)(He,Object(De.a)(Pe.a)),qe=Object(g.b)((function(e){return{storeCtrl:e.storeActivation,bookingFilter:e.bookingFilter}}),null)(Se.b),Ve=Object(m.a)({palette:{primary:{main:"#f18383"},secondary:{main:"#000"}}}),Ke=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{store:Ye},r.a.createElement(f.a,{theme:Ve},r.a.createElement(qe,null,r.a.createElement(xe,{theme:Ve}))))}}]),t}(a.Component),ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Qe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Ke,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/hotm",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/hotm","/service-worker.js");ze?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Qe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Qe(t,e)}))}}()},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var a="SIGN_IN",r="SIGN_OUT",i=function(e){return{type:a,payload:e}},o=function(){return{type:r}}},8:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"v",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"t",(function(){return c})),n.d(t,"k",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"i",(function(){return g})),n.d(t,"n",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"o",(function(){return h})),n.d(t,"w",(function(){return O})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"l",(function(){return j})),n.d(t,"s",(function(){return y})),n.d(t,"u",(function(){return k})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return w})),n.d(t,"P",(function(){return _})),n.d(t,"Q",(function(){return C})),n.d(t,"O",(function(){return T})),n.d(t,"A",(function(){return A})),n.d(t,"B",(function(){return I})),n.d(t,"D",(function(){return N})),n.d(t,"E",(function(){return x})),n.d(t,"C",(function(){return D})),n.d(t,"G",(function(){return P})),n.d(t,"J",(function(){return F})),n.d(t,"I",(function(){return M})),n.d(t,"x",(function(){return R})),n.d(t,"R",(function(){return U})),n.d(t,"H",(function(){return L})),n.d(t,"y",(function(){return B})),n.d(t,"z",(function(){return W})),n.d(t,"F",(function(){return G})),n.d(t,"M",(function(){return H})),n.d(t,"N",(function(){return Y})),n.d(t,"L",(function(){return q})),n.d(t,"K",(function(){return V}));var a="CHANGE_ORGANIC",r="CHANGE_PENSIONER_RATE",i="SUBMIT_BOOKING",o="CHANGE_BOOKING_STAGE",c="SET_SELECTED_ARTIST",s="INC_ITEM_QTY",u="DEC_ITEM_QTY",l="GET_AVAIL_ARTISTS",d="RECEIVE_AVAIL_ARTISTS",g="ERROR_AVAIL_ARTISTS",f="RESET_BOOKING",m="ACTIVATE_BOOKINGS",b="SEARCH_BOOKING",p="ADD_BOOKING",h="SAVE_BOOKING",O="UPDATE_BOOKING",v="ASSIGN_ARTISTS",E="ASSIGN_CLIENT",j="LOAD_BOOKING",y="SET_FROM_DATE",k="SET_TO_DATE",S="SET_ARTIST",w="SET_CLIENT",_=function(){return{type:a}},C=function(){return{type:r}},T=function(e,t,n){return{type:i,bookingDate:e,bookingEnd:t,bookingAddr:n}},A=function(e){return{type:o,stage:e}},I=function(e){return{type:c,order:e}};function N(e){return function(t){return t({type:l}),fetch(e).then((function(e){return e.json()}),(function(e){console.log("Artists fetching error"),t({type:g})})).then((function(e){t({type:d,payload:e})}))}}var x=function(e){return{type:s,itemId:e}},D=function(e){return{type:u,itemId:e}},P=function(){return{type:f}},F=function(e){return{type:m,val:e}},M=function(){return{type:b}},R=function(e,t){return{type:p,payload:e,callMe:t}},U=function(e,t){return{type:O,payload:e,callMe:t}},L=function(e){return{type:h,payload:e}},B=function(e){return{type:v,artistIds:e}},W=function(e){return{type:E,client:e}},G=function(e){return{type:j,booking:e}},H=function(e){return{type:y,val:e}},Y=function(e){return{type:k,val:e}},q=function(e){return{type:w,val:e}},V=function(e){return{type:S,val:e}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e,t,n){for(var a=0,r=t.organic,i=t.pensionerRate,o=0,c=Object.keys(n);o<c.length;o++){var s=c[o],u=n[s];a+=(r?e[s].organicPrice:e[s].price)*(i?.8:1)*u}return a.toFixed(2)},r=function(e){return(.3*e).toFixed(2)}},93:function(e,t,n){"use strict";var a=n(6),r=n(0),i=n.n(r),o=n(14),c=n.n(o),s=n(25),u=n(21),l=n(20),d=n.n(l);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t){switch(t.type){case"FETCH_INIT":return f({},e,{isLoading:!0,hasErrored:!1});case"FETCH_SUCCESS":return f({},e,{isLoading:!1,hasErrored:!1,errorMessage:"",data:t.payload});case"FETCH_FAILURE":return f({},e,{isLoading:!1,hasErrored:!0,errorMessage:"Data Retrieve Failure"});default:throw new Error}},b=function(e,t,n){var i=Object(r.useState)(e),o=Object(a.a)(i,1)[0],u=Object(r.useReducer)(m,{isLoading:!1,hasErrored:!1,errorMessage:"",data:t}),l=Object(a.a)(u,2),g=l[0],b=l[1];return Object(r.useEffect)((function(){var e=!1;return n&&function(){var t=Object(s.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b({type:"FETCH_INIT"}),t.prev=1,t.next=4,d.a.get(o);case 4:n=t.sent,e||b({type:"FETCH_SUCCESS",payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e||b({type:"FETCH_FAILURE"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[o,n]),f({},g)};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e,t){return e.reduce((function(e,n){return h({},e,Object(u.a)({},n[t].toString(),n))}),{})},v=function(e,t){switch(t.type){case"FETCH_INIT":return h({},e,{isLoading:!0,isUpdating:!1,hasErrored:!1});case"FETCH_SUCCESS":return h({},e,{isLoading:!1,isUpdating:!1,hasErrored:!1,errorMessage:"",data:Object.assign({},O(t.payload,"booking_id"))});case"FETCH_FAILURE":return h({},e,{isLoading:!1,isUpdating:!1,hasErrored:!0,errorMessage:"Data Retrieve Failure"});case"UPDATE_INIT":return h({},e,{isLoading:!1,isUpdating:!0,hasErrored:!1});case"POST_SUCCESS":case"PUT_SUCCESS":return h({},e,{isLoading:!1,isUpdating:!1,hasErrored:!1,errorMessage:"",data:Object.assign({},e.data,O([t.payload],"booking_id"))});case"DELETE_SUCCESS":return h({},e,{isLoading:!1,isUpdating:!1,hasErrored:!1,errorMessage:""});case"UPDATE_FAILURE":return h({},e,{isLoading:!1,isUpdating:!1,hasErrored:!0,errorMessage:t.errMessage});default:throw new Error}},E=function(e,t,n,i,o,u,l){var g=Object(r.useReducer)(v,{isLoading:!1,isUpdating:!1,hasErrored:!1,errorMessage:"",data:t}),f=Object(a.a)(g,2),m=f[0],b=f[1];return Object(r.useEffect)((function(){var t=!1,a=function(){var n=Object(s.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b({type:"FETCH_INIT"}),n.prev=1,n.next=4,d.a.get(e);case 4:a=n.sent,t||b({type:"FETCH_SUCCESS",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t||b({type:"FETCH_FAILURE"});case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}(),r=function(){var n=Object(s.a)(c.a.mark((function n(a){var r,i,o,s;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b({type:"UPDATE_INIT"}),r={method:"post",headers:{"Content-Type":"application/json"},url:e,data:a},n.prev=2,n.next=5,d()(r);case 5:i=n.sent,o=i.data.booking_id,t||(o>0?(s=h({},a,{booking_id:o}),b({type:"POST_SUCCESS",payload:s}),u()):alert(i.data.error+" Please call to resolve this issue.")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),t||b({type:"UPDATE_FAILURE",errorMessage:n.t0});case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}(),l=function(){var n=Object(s.a)(c.a.mark((function n(a){var r,i,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b({type:"UPDATE_INIT"}),r={method:"put",headers:{"Content-Type":"application/json"},url:e,data:a},n.prev=2,n.next=5,d()(r);case 5:i=n.sent,o=i.data.booking_id,t||(o>0?(a.paid_amount>0&&(a.paid_amount=a.total_amount),b({type:"PUT_SUCCESS",payload:a}),u()):alert(i.data.error+" Please call to resolve this issue.")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),t||b({type:"UPDATE_FAILURE",errorMessage:n.t0});case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();if(n&&!m.isLoading&&!m.isUpdating)switch(i){case"get":a();break;case"post":r(o);break;case"put":l(o);break;default:throw new Error}return function(){t=!0}}),[n,i,o,l]),h({},m)},j=n(86);var y=n(15),k=n(81),S=n.n(k);n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return _}));var w=Object(r.createContext)(),_=function(e){var t=e.children,n=e.storeCtrl,o=e.bookingFilter,c=n.servicesActive,s=n.artistsActive,u=n.bookingsActive,l=n.requestMethod,g=n.data,f=n.callMe,m=n.bookingTrigger,p=o.fromDate,h=o.toDate,O=o.artist?o.artist.id:null,v=o.client?o.client.id:null,k=Object(r.useState)(function(e,t){return new String(y.e+"?from_date="+S()(e).format("YYYY-MM-DD")+"&to_date="+S()(t).format("YYYY-MM-DD"))}(p,h)),_=Object(a.a)(k,2),C=_[0],T=_[1],A=Object(r.useState)({}),I=Object(a.a)(A,2),N=I[0],x=I[1],D=Object(r.useState)(!1),P=Object(a.a)(D,2),F=P[0],M=P[1],R=Object(r.useState)({}),U=Object(a.a)(R,2),L=U[0],B=U[1],W=Object(r.useState)(!1),G=Object(a.a)(W,2),H=G[0],Y=G[1],q=Object(r.useState)([]),V=Object(a.a)(q,2),K=V[0],z=V[1],Q=Object(r.useState)(!1),J=Object(a.a)(Q,2),$=J[0],X=J[1],Z=Object(r.useState)([]),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(!1),re=Object(a.a)(ae,2),ie=re[0],oe=re[1],ce=Object(r.useState)({}),se=Object(a.a)(ce,2),ue=se[0],le=se[1],de=b(y.k,[],c);Object(r.useEffect)((function(){0!==de.data.length&&(x(function(e){for(var t={},n=[],a=0;a<e.length;a++){for(var r=Object.values(e[a].data),i=[],o=0;o<r.length;o++){var c=r[o].id.toString();i.push(c),t[c]={cat:a,description:r[o].description,price:r[o].sale_price,organicPrice:r[o].organic_add_price,timeOnsite:r[o].time_on_site,onlineBooking:1===r[o].online_booking,addOn:1===r[o].add_on}}n.push({name:e[a].cat,list:i})}return{items:t,cats:n}}(de.data)),M(!0))}),[de.isLoading,de.data]);var ge=b(y.b,[],s);Object(r.useEffect)((function(){var e=new String(y.e+"?from_date="+S()(p).format("YYYY-MM-DD"));e=e+"&to_date="+S()(h).format("YYYY-MM-DD"),O&&(e=e+"&artist_id="+O.toString()),v&&(e=e+"&client_id="+v.toString()),T(e)}),[p,h,O,v]),Object(r.useEffect)((function(){0!==ge.data.length&&(B(function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id.toString()]={id:e[n].id,name:e[n].name,state:e[n].state,photo:e[n].photo,title:e[n].title,bio:e[n].bio,hashtag:e[n].hashtag?e[n].hashtag.replace("#",""):"haironthemove2u"};return t}(ge.data)),Y(!0))}),[ge.isLoading,ge.data]);var fe=E(C,{},u,l,g,f,m);return Object(r.useEffect)((function(){0!==fe.data.length&&ne(function(e){var t=[];for(var n in e){var a=e[n].client_id;t.includes(a)||t.push(a)}return t}(fe.data))}),[fe.isLoading,fe.data]),Object(r.useEffect)((function(){te.length>0&&Promise.allSettled(te.map((function(e){var t={method:"get",headers:{Authorization:y.a},url:y.o+"/"+e};return d()(t)}))).then((function(e){var t={};e.forEach((function(e){if("fulfilled"===e.status){var n=e.value.data,a=n.id;t[a.toString()]={id:a,name:n.name,phone:n.meta.billing_phone[0]}}})),le(t),oe(!ie)}))}),[te]),Object(r.useEffect)((function(){H&&F&&(z(function(e,t,n,a){var r=[];for(var i in e){var o=[],c=0,s=e[i];if(t[s.artist_id_list[0]]&&n[s.client_id]){for(var u={},l={organic:s.with_organic,pensionerRate:s.with_pensioner_rate},d=0;d<s.services.length;d++)a[s.services[d]]&&(o.push(a[s.services[d]].description+" Qty "+s.quantities[d]),u[s.services[d]]=s.quantities[d]);c=Object(j.a)(a,l,u),r.push({id:s.booking_id,start:new Date(s.booking_date+"T"+s.booking_time+":00"),end:new Date(s.booking_date+"T"+s.booking_end_time+":00"),address:s.event_address,artists:s.artist_id_list.map((function(e){return t[e]})),artistNames:s.artist_id_list.map((function(e){return t[e].name})).join(", "),client:n[s.client_id],organic:s.with_organic,serviceItems:o,total:c})}}return r}(fe.data,L,ue,N.items)),X(!0))}),[ie,ue]),i.a.createElement(w.Provider,{value:{services:N,servicesFetched:F,events:K,eventsFetched:$,artists:L,artistsFetched:H,bookingsData:fe}},t)}}},[[173,5,6]]]);
//# sourceMappingURL=main.269f4a6a.chunk.js.map